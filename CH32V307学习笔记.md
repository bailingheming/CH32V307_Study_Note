# CH32V307学习笔记

***

## 说明：
1. 本文档由白令鹤鸣撰写，由白令鹤鸣负责解释。
2. 本文档用于记录白令鹤鸣学习CH32V307过程中的笔记。
3. 文档进行小修改则仅更改小数点后数字，如**V1.2->V1.3**；
   进行大模块的补充则更改小数点前数字，如**V1.7->V2.0**。

| 文档名称 | 版本 | 作者 | 时间 | 备注 |
| :------: | :---: | :---: | :---: | :---: |
|CH32V307学习笔记|V1.0|白令鹤鸣|2024.9.23|初次建立|

***
## 一、开发板
### 1.开发板介绍
   本教程使用沁恒微电子官方设计的CH32V307VCT6评估板，如图：
   ![alt text](./CH32V307学习笔记Picture\1.1.png)
   根据官方文档:
   |模块说明\Descriptions ||||
   |-----|-----|-----|-----|
   |1、网口|5、ARDUINO 接口|9、WCH_LinkE IAP 按键|13、USER 按键|
   |2、USB 高速接口|6、复位按键 |10、WCH_LinkE 接口 |14、LED |
   |3 、MCU I/O |7、WCH-LinkE 指示灯|11、SDI&UART 接口 |15、稳压芯片|
   |4、主控 MCU |8、电源开关 |12、WCH-LinkE MCU |16、USB 全速接口|
### 2.开发板获取
1. 淘宝购买：在淘宝**WCH沁恒微电子官方店**购买。
>   店铺链接:***https://m.tb.cn/h.grs5NQzlw9VA6o1***
>   商品链接：***http://e.tb.cn/h.grsTYozaageT696?tk=QTb13R4TXUA***
2. 样品索取：在沁恒微电子官网进行样品索取，点击沁恒微电子官网上方栏**服务支持->样品索取**即可进入。进入后界面如图所示，如实填写相关信息即可。
   ![alt text](./CH32V307学习笔记Picture\1.2.png)

>  沁恒微电子官网：***https://www.wch.cn***

***
## 二、编译环境
### 1.安装MouRiver Studio(MRS)
#### 1.1 MRS下载
MRS提供Windows、Linux两个版本。
本教程主要运行环境为Windows，通过点击MounRIver_Studio_Setup_Vxxx.zip下载最新版本，也可点击查看更多下载历史版本。
![alt text](./CH32V307学习笔记Picture\2.1.png)

>    官网下载地址：***http://www.mounriver.com/download***
 
#### 1.2 MRS安装
1.  解压安装包，双击MounRiver_studio_Setup_Vxxx.exe执行安装，出现如下界面，按照提示，点击**下一步**。
![alt text](./CH32V307学习笔记Picture\2.2.png)

2.  点击**我接受**，同意安装许可协议。
![alt text](./CH32V307学习笔记Picture\2.3.png)

3.  选择安装路径，注意路径中不要有空格和中文等特殊字符，选择好路径后，点击**下一步**。
![alt text](./CH32V307学习笔记Picture\2.4.png)

4.  选择**开始菜单**文件夹，默认即可，点击**安装**。
![alt text](./CH32V307学习笔记Picture\2.5.png)

5.  执行安装，过程有点漫长，耐心等待即可。
![alt text](./CH32V307学习笔记Picture\2.6.png)

6.  完成MRS安装。点击完成即可。
![alt text](./CH32V307学习笔记Picture\2.7.png)

安装完成后，桌面会出现MRS的快捷方式。如下图所示：
![alt text](./CH32V307学习笔记Picture\2.8.png)

### 2.基础使用说明
#### 2.1 汉化：
   MounRiver Studio提供了官方汉化。
   MSR汉化的打开方式：**MRS菜单栏 Help->Language->简体中文**。
   ![alt text](./CH32V307学习笔记Picture\2.9.png)
   完成后重启编译器即可使用官方汉化包。

#### 2.2 帮助文档：
   MRS帮助文档的打开方式：**MRS菜单栏 帮助->帮助手册**。
   ![alt text](./CH32V307学习笔记Picture\2.10.png)

#### 2.3 创建一个空工程：
    1.  点击主菜单 **文件->新建->MounRiver工程**
      出现如图所示的界面：
      ![alt text](./CH32V307学习笔记Picture\2.11.png)
    2. 工程名为所建工程的名称，
      使用解决方案位置为默认存放路径，取消该项勾选为使用自定义路径，自定义路径在工程路径一栏选择。
      左侧框选择芯片厂商和系列，或者选择通用类型，右侧选择具体的芯片型号。可通过RISC-V Core与ARM Core勾选项以及Type Search快速过滤内置芯片模板。也可勾选Self-define template，创建自定义工程。
    3. 点击Finish完成创建工程。

#### 2.4 路径添加：
   1. 右键单击目标工程，选择**属性**
      出现如图所示的界面：
      ![alt text](./CH32V307学习笔记Picture\2.12.png)
   2. 在左侧栏中选择**C/C++ General->路径和符号**打开。
   3. 点击右侧栏中的**添加...**
      出现如图所示的界面：
      ![alt text](./CH32V307学习笔记Picture\2.13.png)
   4. 勾选**是一个工作空间路径**，并写入对应文件的文件夹路径。(推荐使用相对路径 **/${ProjName}/...**，而不是绝对路径，方便后续工程迁移)。
   5. 点击**应用并关闭**，完成路径的添加。

#### 2.5 导入一个已有工程
   1.  点击主菜单 **文件->加载**
      出现如图所示的界面：
      ![alt text](./CH32V307学习笔记Picture\2.14.png)
   2. 点击**浏览...**，选择对应工程。
   3. 点击**确定**，即可导入选中的目标工程。